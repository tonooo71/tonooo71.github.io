{"componentChunkName":"component---src-templates-post-template-tsx","path":"/posts/archlinux-on-raspberrypi4","result":{"data":{"markdownRemark":{"id":"1dad0c71-0794-53dd-a399-a953d1162d61","html":"<h2 id=\"arch-linux-を-raspberry-pi-にインストールする\" style=\"position:relative;\"><a href=\"#arch-linux-%E3%82%92-raspberry-pi-%E3%81%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B\" aria-label=\"arch linux を raspberry pi にインストールする permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Arch Linux を Raspberry Pi にインストールする</h2>\n<p>インストールまでの手順などは基本的な情報は<a href=\"https://wiki.archlinux.jp/index.php/Raspberry_Pi#Raspberry_Pi_4\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Arch Wiki</a>にまとまっているので、インストール後の設定について、また引っかかった点などをまとめていきます。</p>\n<h2 id=\"ssh-するにあたって\" style=\"position:relative;\"><a href=\"#ssh-%E3%81%99%E3%82%8B%E3%81%AB%E3%81%82%E3%81%9F%E3%81%A3%E3%81%A6\" aria-label=\"ssh するにあたって permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSH するにあたって</h2>\n<p>インストール後は SSH で Raspberry Pi にアクセスします。<br>\nこのとき、アクセス元のターミナルによってはエラーが出たり、うまくキーボードのキー入力が反映されなかったりします。<br>\nこれは、アクセスもとの環境変数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>E</mi><mi>R</mi><mi>M</mi><mtext>が</mtext><mi>S</mi><mi>S</mi><mi>H</mi><mtext>でアクセスした先にも引き継がれることが原因で、アクセスした先</mtext><mo stretchy=\"false\">(</mo><mtext>この場合は</mtext><mi>R</mi><mi>a</mi><mi>s</mi><mi>p</mi><mi>b</mi><mi>e</mi><mi>r</mi><mi>r</mi><mi>y</mi><mi>P</mi><mi>i</mi><mtext>側</mtext><mo stretchy=\"false\">)</mo><mtext>に環境変数で指定されたターミナルの</mtext><mi>t</mi><mi>e</mi><mi>r</mi><mi>m</mi><mi>i</mi><mi>n</mi><mi>f</mi><mi>o</mi><mtext>ファイルが存在しないため引き起こされるものです。自分は</mtext><mi>T</mi><mi>e</mi><mi>r</mi><mi>m</mi><mi>i</mi><mi>t</mi><mi>e</mi><mtext>を使用しており環境変数</mtext></mrow><annotation encoding=\"application/x-tex\">TERMがSSHでアクセスした先にも引き継がれることが原因で、アクセスした先(この場合はRaspberry Pi側)に環境変数で指定されたターミナルのterminfoファイルが存在しないため引き起こされるものです。  \n自分はTermiteを使用しており環境変数</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord cjk_fallback\">が</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord cjk_fallback\">で</span><span class=\"mord cjk_fallback\">ア</span><span class=\"mord cjk_fallback\">ク</span><span class=\"mord cjk_fallback\">セ</span><span class=\"mord cjk_fallback\">ス</span><span class=\"mord cjk_fallback\">し</span><span class=\"mord cjk_fallback\">た</span><span class=\"mord cjk_fallback\">先</span><span class=\"mord cjk_fallback\">に</span><span class=\"mord cjk_fallback\">も</span><span class=\"mord cjk_fallback\">引</span><span class=\"mord cjk_fallback\">き</span><span class=\"mord cjk_fallback\">継</span><span class=\"mord cjk_fallback\">が</span><span class=\"mord cjk_fallback\">れ</span><span class=\"mord cjk_fallback\">る</span><span class=\"mord cjk_fallback\">こ</span><span class=\"mord cjk_fallback\">と</span><span class=\"mord cjk_fallback\">が</span><span class=\"mord cjk_fallback\">原</span><span class=\"mord cjk_fallback\">因</span><span class=\"mord cjk_fallback\">で</span><span class=\"mord cjk_fallback\">、</span><span class=\"mord cjk_fallback\">ア</span><span class=\"mord cjk_fallback\">ク</span><span class=\"mord cjk_fallback\">セ</span><span class=\"mord cjk_fallback\">ス</span><span class=\"mord cjk_fallback\">し</span><span class=\"mord cjk_fallback\">た</span><span class=\"mord cjk_fallback\">先</span><span class=\"mopen\">(</span><span class=\"mord cjk_fallback\">こ</span><span class=\"mord cjk_fallback\">の</span><span class=\"mord cjk_fallback\">場</span><span class=\"mord cjk_fallback\">合</span><span class=\"mord cjk_fallback\">は</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathnormal\">i</span><span class=\"mord cjk_fallback\">側</span><span class=\"mclose\">)</span><span class=\"mord cjk_fallback\">に</span><span class=\"mord cjk_fallback\">環</span><span class=\"mord cjk_fallback\">境</span><span class=\"mord cjk_fallback\">変</span><span class=\"mord cjk_fallback\">数</span><span class=\"mord cjk_fallback\">で</span><span class=\"mord cjk_fallback\">指</span><span class=\"mord cjk_fallback\">定</span><span class=\"mord cjk_fallback\">さ</span><span class=\"mord cjk_fallback\">れ</span><span class=\"mord cjk_fallback\">た</span><span class=\"mord cjk_fallback\">タ</span><span class=\"mord cjk_fallback\">ー</span><span class=\"mord cjk_fallback\">ミ</span><span class=\"mord cjk_fallback\">ナ</span><span class=\"mord cjk_fallback\">ル</span><span class=\"mord cjk_fallback\">の</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\">o</span><span class=\"mord cjk_fallback\">フ</span><span class=\"mord cjk_fallback\">ァ</span><span class=\"mord cjk_fallback\">イ</span><span class=\"mord cjk_fallback\">ル</span><span class=\"mord cjk_fallback\">が</span><span class=\"mord cjk_fallback\">存</span><span class=\"mord cjk_fallback\">在</span><span class=\"mord cjk_fallback\">し</span><span class=\"mord cjk_fallback\">な</span><span class=\"mord cjk_fallback\">い</span><span class=\"mord cjk_fallback\">た</span><span class=\"mord cjk_fallback\">め</span><span class=\"mord cjk_fallback\">引</span><span class=\"mord cjk_fallback\">き</span><span class=\"mord cjk_fallback\">起</span><span class=\"mord cjk_fallback\">こ</span><span class=\"mord cjk_fallback\">さ</span><span class=\"mord cjk_fallback\">れ</span><span class=\"mord cjk_fallback\">る</span><span class=\"mord cjk_fallback\">も</span><span class=\"mord cjk_fallback\">の</span><span class=\"mord cjk_fallback\">で</span><span class=\"mord cjk_fallback\">す</span><span class=\"mord cjk_fallback\">。</span><span class=\"mord cjk_fallback\">自</span><span class=\"mord cjk_fallback\">分</span><span class=\"mord cjk_fallback\">は</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">e</span><span class=\"mord cjk_fallback\">を</span><span class=\"mord cjk_fallback\">使</span><span class=\"mord cjk_fallback\">用</span><span class=\"mord cjk_fallback\">し</span><span class=\"mord cjk_fallback\">て</span><span class=\"mord cjk_fallback\">お</span><span class=\"mord cjk_fallback\">り</span><span class=\"mord cjk_fallback\">環</span><span class=\"mord cjk_fallback\">境</span><span class=\"mord cjk_fallback\">変</span><span class=\"mord cjk_fallback\">数</span></span></span></span>TERM は<code class=\"language-text\">xterm-termite</code>となっていましたが、<code class=\"language-text\">xterm-termite.terminfo</code>ファイルが Raspberry Pi 側の<code class=\"language-text\">/usr/share/terminfo/x/</code>フォルダ内に存在しておらず、バックスペースキーの入力が画面に反映されないという問題が生じていました。<br>\nそこで、アクセス元の PC の<code class=\"language-text\">/usr/share/terminfo/x/xterm-termite.terminfo</code>ファイルを Raspberry Pi 側の<code class=\"language-text\">/usr/share/terminfo/x/</code>フォルダ内に SCP を使ってコピーすることでこの問題は解消されました。</p>\n<h2 id=\"初めて-pacman-を利用するとき\" style=\"position:relative;\"><a href=\"#%E5%88%9D%E3%82%81%E3%81%A6-pacman-%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D\" aria-label=\"初めて pacman を利用するとき permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>初めて pacman を利用するとき</h2>\n<p>はじめはパッケージのインストールやアップグレードには<code class=\"language-text\">pacman</code>を利用すると思いますが、その際以下のような出力が表示されることがあります。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">warning: Public keyring not found; have you run &#39;pacman-key --init&#39;?\ndownloading required keys...\nerror: keyring is not writable\nerror: keyring is not writable\nerror: keyring is not writable\nerror: keyring is not writable\n...</code></pre></div>\n<p>キーリングが見つからないと出ているので、出力されたとおりに<code class=\"language-text\">pacman-key --init</code>を実行してみる。<br>\nそして再び<code class=\"language-text\">pacman -Syyu</code>などを実行してみると、自分の環境では以下のような出力となりパッケージのアップデートに失敗してしまいました。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">downloading required keys...\n:: Import PGP key 77193F152BDBE6A6, &quot;Arch Linux ARM Build System &lt;builder+xu6@archlinuxarm.org&gt;&quot;? [Y/n]\nerror: key &quot;77193F152BDBE6A6&quot; could not be looked up remotely\n:: Import PGP key 77193F152BDBE6A6, &quot;Arch Linux ARM Build System &lt;builder+xu6@archlinuxarm.org&gt;&quot;? [Y/n]\nerror: key &quot;77193F152BDBE6A6&quot; could not be looked up remotely\n...</code></pre></div>\n<p>いろいろ検索して<code class=\"language-text\">pacman-key --refresh-keys</code>や<code class=\"language-text\">pacman -S archlinux-keyring</code>を実行しても、以前パッケージのアップデートができなかったりそもそもそれらのコマンドが失敗するばかりでした。<br>\n最終的には<a href=\"https://wiki.archlinux.jp/index.php/Pacman-key#.E9.8D.B5.E3.82.92.E3.82.A4.E3.83.B3.E3.83.9D.E3.83.BC.E3.83.88.E3.81.A7.E3.81.8D.E3.81.AA.E3.81.84\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Arch Wiki</a>を参考に<code class=\"language-text\">pacman-key --populate archlinuxarm</code>を実行したところアップデートに無事成功しました。(Wiki とは異なり archlinux のところを archlinuxarm に変更する点に注意です)</p>\n<h2 id=\"wi-fi-に接続する\" style=\"position:relative;\"><a href=\"#wi-fi-%E3%81%AB%E6%8E%A5%E7%B6%9A%E3%81%99%E3%82%8B\" aria-label=\"wi fi に接続する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Wi-Fi に接続する</h2>\n<p><a href=\"https://tomosoft.jp/design/?p=10356#ArchLinux\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">こちら</a>を参考に、以下のコマンドを入力していきます。<br>\n事前に<code class=\"language-text\">wpa_supplicant</code>のインストールが必要です。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">wifi-menu -o\n\nnetctl enable _profile\nnetctl start _profile</code></pre></div>","fields":{"slug":"/posts/archlinux-on-raspberrypi4","tagSlugs":["/tag/arch-linux/","/tag/linux/","/tag/raspberry-pi/"]},"frontmatter":{"date":"2020-05-17T20:58:36.185112","description":"インストール後のセットアップ時に詰まった点などをメモ","tags":["Arch Linux","Linux","Raspberry pi"],"title":"Raspberry Pi 4にArch Linuxをインストール","socialImage":null}}},"pageContext":{"slug":"/posts/archlinux-on-raspberrypi4"}},"staticQueryHashes":["251939775","401334301","825871152"]}