{"componentChunkName":"component---src-templates-blog-post-js","path":"/2018/180202_mpd_1/180202_mpd_1/","result":{"data":{"site":{"siteMetadata":{"title":"RINotes","siteUrl":"https://tonooo71.github.io"}},"markdownRemark":{"id":"aeea2c2a-fc06-59db-ad52-e2ee7f51cf1e","excerpt":"音楽再生にcmusを使っていたけど、再生している間起動させておくのがちょっと邪魔だったのでmpdをインストールして試す。   インストールパッケージ mpd mpc ncmpc gnome-terminal mpcはmpdのコマンドライン操作ツール、ncmpcはncurseベースのCLIプレイヤー、そしてncmpc…","html":"<p>音楽再生にcmusを使っていたけど、再生している間起動させておくのがちょっと邪魔だったのでmpdをインストールして試す。  </p>\n<h4>インストールパッケージ</h4>\n<ul>\n<li>mpd</li>\n<li>mpc</li>\n<li>ncmpc</li>\n<li>gnome-terminal</li>\n</ul>\n<p>mpcはmpdのコマンドライン操作ツール、ncmpcはncurseベースのCLIプレイヤー、そしてncmpcはフローティングで起動させようと思い、そのために別のターミナルが必要だったのでgnome-terminal、これらをインストールする。</p>\n<h5>mpdの設定</h5>\n<p><a href=\"https://wiki.archlinux.jp/index.php/Music_Player_Daemon#.E3.83.AD.E3.83.BC.E3.82.AB.E3.83.AB.E8.A8.AD.E5.AE.9A_.28.E3.83.A6.E3.83.BC.E3.82.B6.E3.83.BC.E3.81.94.E3.81.A8.29\">ArchWiki</a>に則って設定を記述する。<code class=\"language-text\">~/.config/mpd/mpd.conf</code>に以下の項目も記述。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">bind_to_address\t    &quot;127.0.0.1&quot;\nport                &quot;6600&quot;\nauto_update         &quot;yes&quot;\naudio_output {\n    type            &quot;pulse&quot;\n    name            &quot;MPD&quot;\n}</code></pre></div>\n<p>そしてmpdのサービスファイルを起動時に立ち上げる。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ systemctl --user enable mpd</code></pre></div>\n<h4>i3blocksのモジュール</h4>\n<p>cmus用のモジュールを流用して書き換え。<br>\n左クリックで再生/停止、右クリックでncmpcを起動。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\"><span class=\"token variable\">$(</span>mpc  <span class=\"token operator\">|</span> <span class=\"token function\">wc</span> -l<span class=\"token variable\">)</span></span> -eq <span class=\"token number\">1</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token assign-left variable\">status</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"[stopped]\"</span><span class=\"token variable\">)</span></span>\n<span class=\"token keyword\">elif</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\"><span class=\"token variable\">$(</span>mpc <span class=\"token operator\">|</span> <span class=\"token function\">wc</span> -l<span class=\"token variable\">)</span></span> -ge <span class=\"token number\">3</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token assign-left variable\">status</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>mpc <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> -n 2P <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print <span class=\"token variable\">$1</span>}'</span><span class=\"token variable\">)</span></span>\n    <span class=\"token assign-left variable\">music</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>mpc -f <span class=\"token punctuation\">[</span>%title%/%artist%<span class=\"token punctuation\">]</span> <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> -n 1P<span class=\"token variable\">)</span></span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$status</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"[paused]\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token keyword\">case</span> <span class=\"token variable\">$BLOCK_BUTTON</span> <span class=\"token keyword\">in</span>\n        <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> mpc -q play <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n        <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> gnome-terminal -- ncmpc <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">esac</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"     <span class=\"token variable\">$music</span>\"</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"     <span class=\"token variable\">$music</span>\"</span>\n<span class=\"token keyword\">elif</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$status</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"[playing]\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token keyword\">case</span> <span class=\"token variable\">$BLOCK_BUTTON</span> <span class=\"token keyword\">in</span>\n        <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> mpc -q pause <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n        <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> gnome-terminal -- ncmpc <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">esac</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"     <span class=\"token variable\">$music</span>\"</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"     <span class=\"token variable\">$music</span>\"</span>\n<span class=\"token keyword\">elif</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$status</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"[stopped]\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token keyword\">case</span> <span class=\"token variable\">$BLOCK_BUTTON</span> <span class=\"token keyword\">in</span>\n        <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> mpc -q play <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n        <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> gnome-terminal -- ncmpc <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">esac</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"  -/-\"</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"  -/-\"</span>\n<span class=\"token keyword\">fi</span></code></pre></div>\n<h4>うん</h4>\n<p>いいかんじ。</p>","frontmatter":{"title":"mpd導入","date":"February 02, 2018","description":"音楽再生にcmusを使っていたけど、再生している間起動させておくのがちょっと邪魔だったのでmpdをインストールして試す","tags":"Linux"}}},"pageContext":{"slug":"/2018/180202_mpd_1/180202_mpd_1/","previous":{"fields":{"slug":"/2018/180130_neovim_1/180130_neovim_1/"},"frontmatter":{"title":"Neovim(1)","tags":"Neovim"}},"next":{"fields":{"slug":"/2018/180210_neovim_2/180210_neovim_2/"},"frontmatter":{"title":"Neovim(2)","tags":"Neovim"}}}}}