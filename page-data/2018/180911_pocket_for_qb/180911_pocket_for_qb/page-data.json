{"componentChunkName":"component---src-templates-blog-post-js","path":"/2018/180911_pocket_for_qb/180911_pocket_for_qb/","result":{"data":{"site":{"siteMetadata":{"title":"RINotes","siteUrl":"https://tonooo71.github.io"}},"markdownRemark":{"id":"4970d506-e901-5f00-8d63-6cd4d65ca910","excerpt":"最近使い始めたqutebrowser、結構使いやすいのもあってメインブラウザがこっちになりつつある 問題点としてはFirefoxだったりChromeで使っていたアドオンが基本的に使えないってのがあったけど、個人的にはlastpassとadblock程度しか使っていなかったからそこまで問題はなく使えてる(lastpass…","html":"<p>最近使い始めたqutebrowser、結構使いやすいのもあってメインブラウザがこっちになりつつある<br>\n問題点としてはFirefoxだったりChromeで使っていたアドオンが基本的に使えないってのがあったけど、個人的にはlastpassとadblock程度しか使っていなかったからそこまで問題はなく使えてる(lastpassは公式でスクリプトが用意されているし)<br>\nまた、<code class=\"language-text\">spawn</code>コマンドでターミナル上でスクリプトを実行できるので簡単なアドオンなら追加できる<br>\nそこで後で読むサービスの1つであるpocketに表示している記事を保存するスクリプトなら簡単にかけそうだったので書いてみた<br>\nいろいろ調べるとpocketのpythonモジュール、ラッパーが結構存在している気がするが、記事を追加するだけであれば必要ないので使っていない  </p>\n<p>そして書いたものがこれ  </p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#!/usr/bin/python</span>\n<span class=\"token keyword\">import</span> requests\n<span class=\"token keyword\">import</span> sys\n\nurl <span class=\"token operator\">=</span> sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\nconsumer_key <span class=\"token operator\">=</span> <span class=\"token string\">'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'</span>\naccess_token <span class=\"token operator\">=</span> <span class=\"token string\">'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'</span>\n\nrequests<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span><span class=\"token string\">'https://getpocket.com/v3/add'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'url'</span><span class=\"token punctuation\">:</span> url<span class=\"token punctuation\">,</span> <span class=\"token string\">'consumer_key'</span><span class=\"token punctuation\">:</span> consumer_key<span class=\"token punctuation\">,</span> <span class=\"token string\">'access_token'</span><span class=\"token punctuation\">:</span> access_token<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>consumer keyとaccess tokenを事前に取得しておく必要がある<br>\n実行権限を与えたあとで、<code class=\"language-text\">config.py</code>に次のようにでも書けば良い  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">c.aliases = {&#39;pocket&#39;: &#39;spawn ~/.config/qutebrowser/scripts/pocket.py {url}&#39;}</code></pre></div>\n<p>これで<code class=\"language-text\">:pocket</code>と打つだけで記事が保存される<br>\n改善したい点としては、保存した際になにかメッセージを表示させたいかな、ってぐらい</p>\n<h3>追記</h3>\n<p>保存メッセージはdunst使おうかなとも思ったけど、message-infoとしてqutebrowserに表示させることにした<br>\nけどqutebrowserの環境変数?みたいなのはPythonスクリプト内でどう利用したら良いかわからなかったので、一旦シェルスクリプトを経由させるようにした  </p>\n<h3>Refference</h3>\n<p><a href=\"https://github.com/tonooo71/qutebrowser-scripts\">GitHub: tonooo71 - qutebrowser-scripts</a></p>","frontmatter":{"title":"qutebrowser上でpocketへ保存する","date":"September 11, 2018","description":"最近使い始めたqutebrowser、結構使いやすいのもあってメインブラウザがこっちになりつつある","tags":"Linux"}}},"pageContext":{"slug":"/2018/180911_pocket_for_qb/180911_pocket_for_qb/","previous":{"fields":{"slug":"/2018/180906_rofi-mpd-client/180906_rofi-mpd-client/"},"frontmatter":{"title":"Rofiを使って簡単なMPDクライアントを作った","tags":"Linux i3wm"}},"next":{"fields":{"slug":"/2018/180912_ejdict_for_qb/180912_ejdict_for_qb/"},"frontmatter":{"title":"qutebrowserで英和辞書を使う","tags":"Linux"}}}}}