{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020/200517_setup_archlinux_on_raspi/","result":{"data":{"site":{"siteMetadata":{"title":"RINotes","siteUrl":"https://tonooo71.github.io"}},"markdownRemark":{"id":"c754cfdb-85fc-5878-863a-04df72a4b8d0","excerpt":"Arch LinuxをRaspberry Pi にインストールする インストールまでの手順などは基本的な情報はArch Wikiにまとまっているので、インストール後の設定について、また引っかかった点などをまとめていきます。   SSHするにあたって インストール後はSSHでRaspberry Pi…","html":"<h2>Arch LinuxをRaspberry Pi にインストールする</h2>\n<p>インストールまでの手順などは基本的な情報は<a href=\"https://wiki.archlinux.jp/index.php/Raspberry_Pi#Raspberry_Pi_4\">Arch Wiki</a>にまとまっているので、インストール後の設定について、また引っかかった点などをまとめていきます。  </p>\n<h2>SSHするにあたって</h2>\n<p>インストール後はSSHでRaspberry Piにアクセスします。<br>\nこのとき、アクセス元のターミナルによってはエラーが出たり、うまくキーボードのキー入力が反映されなかったりします。<br>\nこれは、アクセスもとの環境変数$TERMがSSHでアクセスした先にも引き継がれることが原因で、アクセスした先(この場合はRaspberry Pi側)に環境変数で指定されたターミナルのterminfoファイルが存在しないため引き起こされるものです。<br>\n自分はTermiteを使用しており環境変数$TERMは<code class=\"language-text\">xterm-termite</code>となっていましたが、<code class=\"language-text\">xterm-termite.terminfo</code>ファイルがRaspberry Pi側の<code class=\"language-text\">/usr/share/terminfo/x/</code>フォルダ内に存在しておらず、バックスペースキーの入力が画面に反映されないという問題が生じていました。<br>\nそこで、アクセス元のPCの<code class=\"language-text\">/usr/share/terminfo/x/xterm-termite.terminfo</code>ファイルをRaspberry Pi側の<code class=\"language-text\">/usr/share/terminfo/x/</code>フォルダ内にSCPを使ってコピーすることでこの問題は解消されました。</p>\n<h2>初めてpacmanを利用するとき</h2>\n<p>はじめはパッケージのインストールやアップグレードには<code class=\"language-text\">pacman</code>を利用すると思いますが、その際以下のような出力が表示されることがあります。  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">warning: Public keyring not found; have you run &#39;pacman-key --init&#39;?\ndownloading required keys...\nerror: keyring is not writable\nerror: keyring is not writable\nerror: keyring is not writable\nerror: keyring is not writable\n...</code></pre></div>\n<p>キーリングが見つからないと出ているので、出力されたとおりに<code class=\"language-text\">pacman-key --init</code>を実行してみる。<br>\nそして再び<code class=\"language-text\">pacman -Syyu</code>などを実行してみると、自分の環境では以下のような出力となりパッケージのアップデートに失敗してしまいました。  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">downloading required keys...\n:: Import PGP key 77193F152BDBE6A6, &quot;Arch Linux ARM Build System &lt;builder+xu6@archlinuxarm.org&gt;&quot;? [Y/n] \nerror: key &quot;77193F152BDBE6A6&quot; could not be looked up remotely\n:: Import PGP key 77193F152BDBE6A6, &quot;Arch Linux ARM Build System &lt;builder+xu6@archlinuxarm.org&gt;&quot;? [Y/n] \nerror: key &quot;77193F152BDBE6A6&quot; could not be looked up remotely\n...</code></pre></div>\n<p>いろいろ検索して<code class=\"language-text\">pacman-key --refresh-keys</code>や<code class=\"language-text\">pacman -S archlinux-keyring</code>を実行しても、以前パッケージのアップデートができなかったりそもそもそれらのコマンドが失敗するばかりでした。<br>\n最終的には<a href=\"https://wiki.archlinux.jp/index.php/Pacman-key#.E9.8D.B5.E3.82.92.E3.82.A4.E3.83.B3.E3.83.9D.E3.83.BC.E3.83.88.E3.81.A7.E3.81.8D.E3.81.AA.E3.81.84\">Arch Wiki</a>を参考に<code class=\"language-text\">pacman-key --populate archlinuxarm</code>を実行したところアップデートに無事成功しました。(Wikiとは異なりarchlinuxのところをarchlinuxarmに変更する点に注意です)</p>\n<h2>Wi-Fiに接続する</h2>\n<p><a href=\"https://tomosoft.jp/design/?p=10356#ArchLinux\">こちら</a>を参考に、以下のコマンドを入力していきます。<br>\n事前に<code class=\"language-text\">wpa_supplicant</code>のインストールが必要です。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">wifi-menu -o\n\nnetctl enable _profile\nnetctl start _profile</code></pre></div>","frontmatter":{"title":"Raspberry Pi 4にArch Linuxをインストール","date":"May 17, 2020","description":"インストール後のセットアップ時に詰まった点などをメモ","tags":"ArchLinux Linux Raspi"}}},"pageContext":{"slug":"/2020/200517_setup_archlinux_on_raspi/","previous":{"fields":{"slug":"/2020/200505_remotework/"},"frontmatter":{"title":"デスク周りの環境紹介","tags":"ガジェット"}},"next":null}}}